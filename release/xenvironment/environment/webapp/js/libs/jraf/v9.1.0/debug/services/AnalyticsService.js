define(["jquery","jraf/jrafcore","jraf/utils/ValidationUtils","jraf/services/ServiceManager"],(function(n,i,e){"use strict";function t(n){if(!e.isNonemptyString(n))throw new TypeError("AnalyticsService: Missing or invalid API key.");this._apiKey=n}return t.DEFAULT_ENVIRONMENT="orcl",t.prototype.loadAgent=function(){window.pendo||this._loadPendoAgent()},t.prototype._loadPendoAgent=function(){var n;n=this._apiKey,function(i,e,t,o,a){var r,c,s,d,p;for((a=i[o]=i[o]||{})._q=[],c=0,s=(r=["initialize","identify","updateOptions","pageLoad"]).length;c<s;++c)!function(n){a[n]=a[n]||function(){a._q[n===r[0]?"unshift":"push"]([n].concat([].slice.call(arguments,0)))}}(r[c]);(d=e.createElement(t)).async=!0,d.src="https://cdn.pendo.io/agent/static/"+n+"/pendo.js",(p=e.getElementsByTagName(t)[0]).parentNode.insertBefore(d,p)}(window,document,"script","pendo")},t.prototype.initializeAgent=function(n,i){if(!window.pendo)throw new Error("AnalyticsService.initializeSession: Analytics agent (pendo) not loaded.");window.pendo.initialize({visitor:n,account:i})},t}));