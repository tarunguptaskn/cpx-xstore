define(["knockout","ojs/ojcore","jraf/jrafcore","jraf/models/notifications/NotificationsFilter","jraf/utils/ValidationUtils","ojs/ojarraydataprovider","ojs/ojlabel","ojs/ojselectsingle","ojs/ojselectcombobox","ojs/ojbutton","ojs/ojformlayout"],(function(e,i,t,s,r,l){"use strict";var a=i.Translations.getTranslatedString;function o(e){if(!(r.isObjectStrict(e)&&r.isFunction(e.loadDataCallback)&&r.isFunction(e.closeTabCallback)&&e.filter instanceof s))throw new TypeError("FiltersTab: Invalid Parameters");this.filterFormId=t.UIShell.generateUniqueId(),this.filterTimeSelectId=t.UIShell.generateUniqueId(),this.filterTypeSelectId=t.UIShell.generateUniqueId(),this.filterSeveritySelectId=t.UIShell.generateUniqueId(),this.filterTimeSelectLabel=a("jraf.sidebar.notifications.filterTimeLabel"),this.filterTypeSelectLabel=a("jraf.sidebar.notifications.filterTypeLabel"),this.filterSeveritySelectLabel=a("jraf.sidebar.notifications.filterSeverityLabel"),this.filterResetLabel=a("jraf.sidebar.notifications.filterReset"),this.filterTimePlaceholder=a("jraf.sidebar.notifications.timeAny"),this.filterTypePlaceholder=a("jraf.sidebar.notifications.filterTypePlaceholder"),this.filterSeverityPlaceholder=a("jraf.sidebar.notifications.filterSeverityPlaceholder"),this.applyLabel=a("jraf.sidebar.notifications.filterApply"),this.cancelLabel=a("jraf.sidebar.notifications.filterCancel"),this.Zc=e.loadDataCallback,this.ij=e.closeTabCallback,this.ib=e.filter,this.Ji()}return o.prototype.Ji=function(){var i=this,t={};t.time=e.observable(this.ib.selectedTimePeriod()),this.ib.selectedTimePeriod.subscribe((function(e){i.activeFilter.time(e)})),t.type=e.observableArray(this.ib.selectedNotificationTypes()),this.ib.selectedNotificationTypes.subscribe((function(e){i.activeFilter.type(e)})),t.severity=e.observableArray(this.ib.selectedSeverities()),this.ib.selectedSeverities.subscribe((function(e){i.activeFilter.severity(e)})),this.activeFilter=t,this.timeSelectOptions=this.ib.timePeriodOptions,this.timeSelectOptionsDataProvider=new l(this.timeSelectOptions,{keyAttributes:"value"}),this.severitySelectOptions=this.ib.severityOptions,this.filterTypeSelectOptions=this.ib.notificationTypeOptions,this.tb={time:e.observable(void 0),type:e.observableArray([]),severity:e.observableArray([])},this.sb(),this.resetFilters=function(){i.ob()},this.revertFilters=function(){i.hb()},this.executeFilters=function(){i.eb()}},o.prototype.ob=function(){this.activeFilter.time(void 0),this.activeFilter.type([]),this.activeFilter.severity([])},o.prototype.hb=function(){this.activeFilter.time(this.tb.time()),this.activeFilter.type(this.tb.type()),this.activeFilter.severity(this.tb.severity()),this.ij()},o.prototype.eb=function(){this.sb(),this.nb(),this.Zc(),this.ij(),this.ib.selectedTileIndex()===s.FILTER_TILE_INDEX&&this.ib.selectedTileIndex(s.FILTER_TILE_INDEX)},o.prototype.sb=function(){this.tb.time(this.activeFilter.time()),this.tb.type(this.activeFilter.type()),this.tb.severity(this.activeFilter.severity())},o.prototype.nb=function(){this.ib.selectedTimePeriod(this.activeFilter.time()),this.ib.selectedNotificationTypes(this.activeFilter.type()),this.ib.selectedSeverities(this.activeFilter.severity())},o}));