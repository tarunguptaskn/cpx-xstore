define(["ojs/ojanimation","hammerjs","jraf/composites/utils/TranslationLoaderUtil","module","ojs/ojknockout"],(function(t,i,s,o){"use strict";e.TOAST_TYPE_STANDARD="standard",e.TOAST_TYPE_ANNOUNCEMENT="announcement",e.Hr=e.DEFAULT_DISMISS_TIMEOUT=3e3;var n={};function e(t){var i=this;this.J=e.y.getTranslations(),this.X=t,this.N=Promise.all([this.J,this.X.properties]).then((function(t){i.M(t[0],t[1])}))}return n[e.TOAST_TYPE_STANDARD]={info:{icon:"oj-rgbu-jraf-standard-toast-info"},warning:{icon:"oj-rgbu-jraf-standard-toast-warning"},error:{icon:"oj-rgbu-jraf-standard-toast-error"},success:{icon:"oj-rgbu-jraf-standard-toast-success"}},n[e.TOAST_TYPE_ANNOUNCEMENT]={info:{icon:"oj-rgbu-jraf-announcement-toast-info"},warning:{icon:"oj-rgbu-jraf-announcement-toast-warning"},error:{icon:"oj-rgbu-jraf-announcement-toast-error"},success:{icon:"oj-rgbu-jraf-announcement-toast-success"}},e.y=new s("oj-rgbu-jraf-toast",o.id),e.prototype.activated=function(){return this.N},e.prototype.bindingsApplied=function(){var t=this;this.co().then((function(){t.ho(),t.fo()}))},e.prototype.disconnected=function(){i(this.X.element).off("swipeup"),this.timeoutId&&window.clearTimeout(this.timeoutId)},e.prototype.M=function(t,i){var s=this,o=this.X.uniqueId;this.dismissButtonId=o+"_dismiss",this.dismissLabel=t.dismiss,n[e.TOAST_TYPE_STANDARD].info.title=t.standardInfoTitle,n[e.TOAST_TYPE_STANDARD].warning.title=t.standardWarningTitle,n[e.TOAST_TYPE_STANDARD].error.title=t.standardErrorTitle,n[e.TOAST_TYPE_STANDARD].success.title=t.standardSuccessTitle,n[e.TOAST_TYPE_ANNOUNCEMENT].info.title=t.announcementInfoTitle,n[e.TOAST_TYPE_ANNOUNCEMENT].warning.title=t.announcementWarningTitle,n[e.TOAST_TYPE_ANNOUNCEMENT].error.title=t.announcementErrorTitle,n[e.TOAST_TYPE_ANNOUNCEMENT].success.title=t.announcementSuccessTitle,this.toastType=i.toastType,this.severity=i.severity,this.toastIcon=null,this.toastIconLabel=null,this.toastTitle=i.toastTitle,this.message=i.message,this.autoDismiss=i.autoDismiss,this.autoDismissTimeout=i.autoDismissTimeout?i.autoDismissTimeout:e.Hr,i.primaryButton&&(this.primaryButton={label:i.primaryButton.label,callback:i.primaryButton.callback}),i.secondaryButton&&(this.secondaryButton={label:i.secondaryButton.label,callback:i.secondaryButton.callback}),this.jo(),this.dismissToast=function(){s.do()},this.firePrimary=function(){s.dismissToast(),s.primaryButton.callback()},this.fireSecondary=function(){s.dismissToast(),s.secondaryButton.callback()}},e.prototype.jo=function(){var t;t=n[this.toastType][this.severity],this.toastIcon="oj-rgbu-jraf-toast-icon "+t.icon,this.toastIconLabel=t.title,this.toastTitle=this.toastTitle||t.title},e.prototype.co=function(){return t.fadeIn(this.X.element,{duration:"250ms"})},e.prototype.dismiss=function(){this.do()},e.prototype.do=function(){var i=this;t.slideOut(this.X.element,{direction:"end",duration:"250ms"}),t.fadeOut(this.X.element,{duration:"250ms",persist:"all"}).then((function(){i.mo()}))},e.prototype.ho=function(){var t=this,s=new i(this.X.element);s.get("swipe").set({direction:i.DIRECTION_VERTICAL}),s.on("swipeup",(function(){t.dismissToast()}))},e.prototype.fo=function(){var t=this;this.autoDismiss&&(this.timeoutId=window.setTimeout((function(){t.do()}),this.autoDismissTimeout))},e.prototype.mo=function(){this.sn("ojRgbuJrafToastDismissed",!1)},e.prototype.sn=function(t,i){var s={bubbles:!0,cancelable:i};return this.X.element.dispatchEvent(new CustomEvent(t,s))},e.setDefaultDismissTime=function(t){if(!("number"==typeof t&&0<t))throw new TypeError("Toast.setDefaultDismissTime: Timeout must be a positive number");e.Hr=t},e}));