define(["ojs/ojcore","jraf/jrafcore","jraf/utils/ValidationUtils"],(function(l,t,i){"use strict";function n(l){if(!i.isObjectStrict(l)||!i.isNumberStrict(l.interval)||!i.isArray(l.callbacks))throw new TypeError("PollingManager: Invalid options.");if(this.il(l.callbacks))throw new TypeError("PollingManager: Invalid options. All callbacks must be functions.");this.nl=!1,this.tl=null,this.sl=l.interval,this.ll=l.callbacks,this.ol(l.key)}return n.rl=0,n.prototype.il=function(l){return 0<l.filter((function(l){return!i.isFunction(l)})).length},n.prototype.ol=function(l){var t=i.isNonemptyString(l);this.al=t?l:"PollingManager"+ ++n.rl},n.prototype.startPolling=function(n){if(!this.nl&&this.el()){var o=this;n=i.getBoolean(n,!0),this.nl=!0,n&&this.hl(),this.tl=window.setInterval((function(){o.hl()}),this.sl),t.UIShell.registerPollingId(this.tl)}else l.Logger.info("PollingManager.startPolling (%s): Called start when polling has already started or when polling is not required.",this.al)},n.prototype.el=function(){return 0<this.ll.length},n.prototype.hl=function(){var t=this.ll.length;l.Logger.info("PollingManager._makePollingCalls (%s): Invoking %d callback function(s).",this.al,t),this.ll.forEach((function(l){l()}))},n.prototype.stopPolling=function(){l.Logger.info("PollingManager.stopPolling (%s): Stopping polling.",this.al),this.tl?(this.nl=!1,t.UIShell.clearPollingId(this.tl),this.tl=null):l.Logger.info("PollingManager.stopPolling (%s): Polling was never started.",this.al)},n}));