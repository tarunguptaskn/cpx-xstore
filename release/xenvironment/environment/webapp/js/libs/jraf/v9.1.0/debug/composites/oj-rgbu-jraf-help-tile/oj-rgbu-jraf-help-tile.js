define(["knockout","ojs/ojlogger","jraf/composites/utils/TranslationLoaderUtil","module","ojs/ojbutton"],(function(t,e,i,n){"use strict";function a(t){var i=this;this._loadingTranslations=a._translationLoader.getTranslations(),this._initializeProperties(t),this._componentInitializing=this._loadingTranslations.then((function(t){i._initializeTranslations(t),e.info("oj-rgbu-jraf-help-tile: component initialized.")}))}return a._translationLoader=new i("oj-rgbu-jraf-help-tile",n.id),a.MAX_TILE_DESCRIPTION_CHARS=500,a.HELP_TYPE_DOCUMENT="document",a.HELP_TYPE_VIDEO="video",a.VIDEO_ICON="oj-rgbu-jraf-help-tile-video-icon",a.DOC_ICON="oj-rgbu-jraf-help-tile-document-icon",a.COLORS={lightblue:"42ADEB",red:"E95A38",lightgreen:"76C66E",purple:"9A66AF",blue:"6296CE",grey:"92A0AD",orange:"F09543",turquiose:"22B5BD",green:"67B460"},a.DEFAULT_COLOR=a.COLORS.lightblue,a.BLANK_TARGET_WINDOW="_blank",a.prototype.activated=function(){return this._componentInitializing},a.prototype.propertyChanged=function(t){var e=t.property;"external"===t.updatedFrom&&"topics"===e&&this._parseData(t.value)},a.prototype._initializeProperties=function(e){this.documentHelpLaunchLabel=t.observable(),this.videoHelpLaunchLabel=t.observable(),this._initTypes(),this.topics=t.observableArray([]),this._data=e.properties.topics,this._parseData(this._data)},a.prototype._initializeTranslations=function(t){this.documentHelpLaunchLabel(t.documentHelpLaunchLabel),this.videoHelpLaunchLabel(t.videoHelpLaunchLabel)},a.prototype._initTypes=function(){this._typeIconMap={},this._typeIconMap[a.HELP_TYPE_DOCUMENT]=a.DOC_ICON,this._typeIconMap[a.HELP_TYPE_VIDEO]=a.VIDEO_ICON,this._typeLabelMap={},this._typeLabelMap[a.HELP_TYPE_DOCUMENT]=this.documentHelpLaunchLabel,this._typeLabelMap[a.HELP_TYPE_VIDEO]=this.videoHelpLaunchLabel},a.prototype._parseData=function(t){for(var i=[],n=0;n<t.length;n++){var o=t[n];void 0!==this._typeIconMap[o.type]?i.push({name:o.name,description:a._getTruncatedString(o.description,a.MAX_TILE_DESCRIPTION_CHARS),url:o.url,imageSrc:o.imageSrc,type:o.type,typeIconClass:this._typeIconMap[o.type],typeLabel:this._typeLabelMap[o.type],color:"#"+(a.COLORS[o.color]||a.DEFAULT_COLOR)}):e.warn("HelpTiles._parseData: Invalid type for entry with name "+o.name)}this.topics(i)},a.prototype.handleTileSelect=function(t,e){window.open(e.data.url,a.BLANK_TARGET_WINDOW)},a._getTruncatedString=function(t,e){if(t.length<=e)return t;var i=t.slice(0,e-3);return i+="â€¦"},a}));