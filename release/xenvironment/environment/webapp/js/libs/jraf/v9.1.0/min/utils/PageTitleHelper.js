define(["ojs/ojcore","jquery","jraf/jrafcore","knockout","jraf/utils/ValidationUtils","ojs/ojcorerouter","ojs/ojrouter"],(function(t,i,n,e,c,o){"use strict";var r={initialize:function(){if(this._c)throw new Error("PageTitleHelper.initialize: Already initialized.");this._c=!0,this.Pc=n.App.getRootRouter(),this.Pc||(this.qc=t.Router.rootInstance),this.Hc=null,this.Jc()},Jc:function(){i(window.document).on("jrafcontentchange",(function(t,i){r.Bc(i)})),n.App.getApplicationName().subscribe((function(){this.Dc()}),this),this.Pc?this.Pc.currentState.subscribe((function(t){t.state&&(r.Hc=null,r.Dc())})):t.Router.transitionedToState.add((function(t){r.Gc(t)}))},Bc:function(t){r.Hc=t.title,r.Dc()},Gc:function(t){t.hasChanged&&(r.Hc=null,r.Dc())},Dc:function(){window.document.title=r.Kc()},Kc:function(){var t=this.Lc(),i=n.App.getApplicationName();return[this.Hc,t,i()].filter((function(t){return c.isNonemptyString(t)})).join(" : ")},Lc:function(){if(this.Pc instanceof o){var i=n.App.getRootRouterState(),e=i.detail.title||i.detail.label||i.path;return t.Translations.getTranslatedString(e)}if(this.qc instanceof t.Router){var c=this.qc.currentState(),r=c.title||c.label||c.id;return t.Translations.getTranslatedString(r)}return null}};return r}));