define(["ojs/ojcore","./AdapterCapabilities","ojs/ojpagingdatagriddatasource","ojs/ojmodel"],(function(t,e){"use strict";return{getCapabilities:function(){return[e.HIDE_SHOW_COLUMNS,e.QUERY_BY_EXAMPLE,e.MULTI_COLUMN_SORT]},handleDetached:function(t){t.refresh()},handleDetachDialogResized:function(t){},handleAttached:function(t){t.refresh()},getSortableColumns:function(t,e){if(t.disableSorting)return[];var r=this._getDataSource(t).getCapability("sort"),n="full"===r||"column"===r;return e.filter((function(t){return n&&t.sortable})).map((function(t){return{value:t.value,label:t.label}}))},getSortCriteria:function(t){var e=t.collection.sortCriteria;return Array.isArray(e)||(e=[]),e},executeSort:function(t,e){var r=t.collection;if(-1===r.fetchSize)r.sortCriteria=e,r.comparator=this._getSortComparator(e);else{if(0===e.length)return;r.sortCriteria=e,r.comparator=e[0].column}r.sort(),t.refresh()},_getDataSource:function(t){return t.getDataSource()},_getSortComparator:function(t){var e=this;return function(r,n){for(var o=0,i=0;i<t.length&&0===o;){var a=t[i].column;o=("asc"===t[i].direction?1:-1)*e._compareCollectionValues(r.attributes[a],n.attributes[a]),i++}return o}},_compareCollectionValues:function(t,e){return t>e?1:e>t?-1:0},applyColumnConfiguration:function(t,e){var r=t.getProperty("columns"),n={};r.forEach((function(t){n[t.valueName]=t}));var o=e.map((function(t){var e=n[t.value];return e.shown=t.shown,e}));t.setProperty("columns",o),t.reset()},getColumnConfiguration:function(t,e){return t.getProperty("columns").map((function(t){return{value:t.valueName,label:t.label||t.valueName,shown:"boolean"!=typeof t.shown||t.shown}}))},hasConfiguredFilters:function(t){for(var e=t.getProperty("columns"),r=!1,n=0;n<e.length;n++)if(e[n].filterEnabled){r=!0;break}return r},isFilterInitiallyShown:function(t){return t.getProperty("filteringEnabled")},showFilters:function(t){t.setProperty("filteringEnabled",!0)},hideFilters:function(t){t.setProperty("filteringEnabled",!1)},clearFilters:function(t){t.clearFilters()},getFilterMatchType:function(t){return t.getProperty("filterMethod")},setFilterMatchType:function(t,e){t.setProperty("filterMethod",e)}}}));