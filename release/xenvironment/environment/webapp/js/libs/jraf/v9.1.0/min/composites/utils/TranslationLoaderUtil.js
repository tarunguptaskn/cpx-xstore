define(["ojs/ojconfig","ojs/ojlogger","jraf/utils/ValidationUtils"],(function(o,n,t){"use strict";function i(o,n){if(!t.isNonemptyString(o)||!t.isNonemptyString(n))throw new TypeError("TranslationLoaderUtil: Missing required component name or module id");this.componentName=o,this.modulePath=n.split(o)[0]+o,this.loadedLocale=null,this.loadedTranslations=null,this.loadingLocale=null,this.loadingTranslations=null,this.customResourceBundlesConfigured=require.specified("jrafL10n")}return i.BUNDLE_REFERENCE_PREFIX="ojL10n!",i.BUNDLE_REFERENCE_NLS_DIR="/resources/nls/",i.BUNDLE_REFERENCE_SUFFIX="-translations",i.CUSTOM_BUNDLE_REFERENCE_PREFIX="jrafL10n!",i.prototype.Lo=function(){return o.getLocale()},i.prototype.Uo=function(){var o=i.BUNDLE_REFERENCE_PREFIX;return this.customResourceBundlesConfigured&&(o+=i.CUSTOM_BUNDLE_REFERENCE_PREFIX),o+=this.modulePath,o+=i.BUNDLE_REFERENCE_NLS_DIR,(o+=this.loadingLocale)+"/"+this.componentName+i.BUNDLE_REFERENCE_SUFFIX},i.prototype.qo=function(){n.info("TranslationLoaderUtil._loadTranslations: Loading new translations.");var o=this.Lo();this.loadingLocale=o;var t=this.Uo();return new Promise((function(i,a){require([t],(function(n){i({translations:n,locale:o})}),(function(o){n.error("TranslationLoaderUtil._loadTranslations: Failed loading translations %s",o),a(o)}))}))},i.prototype.Po=function(o){return n.info("TranslationLoaderUtil._handleSuccessfulTranslationLoad: Translations loaded successfully."),this.loadedLocale=o.locale,this.loadedTranslations=o.translations,this.loadedTranslations},i.prototype.Fo=function(){return this.loadedLocale!==this.Lo()},i.prototype.Mo=function(){return null!==this.loadingLocale&&this.loadingLocale!==this.loadedLocale&&this.loadingLocale===this.Lo()},i.prototype.getTranslations=function(){var o=this;return this.Fo()?(this.Mo()||(this.loadingTranslations=this.qo()),this.loadingTranslations.then((function(n){return o.Po(n)}))):Promise.resolve(this.loadedTranslations)},i}));