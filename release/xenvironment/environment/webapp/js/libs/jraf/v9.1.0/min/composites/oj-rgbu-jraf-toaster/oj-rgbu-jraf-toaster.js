define(["knockout","ojs/ojlogger","ojs/ojanimation"],(function(t,o,e){"use strict";function i(t){this.X=t,this.vo=0,this.M(this.X.properties)}function s(t,o){this.po=t,this.To=o}return i.prototype.M=function(t){var o=this.X.uniqueId;this.toasterWrapperId=o+"_wrapper",this.maximumToastsVisible=t.maximum,this.lo=[],this.yo=[]},i.prototype.openToast=function(t){var o=t.severity;if("info"===o||"warning"===o||"error"===o||"success"===o)return this.go(t);throw new TypeError("oj-rgbu-jraf-toaster.openToast: severity is invalid.")},i.prototype.go=function(t){var o=this.Do(t);return this.yo.push(o),this.bo(),o.context},i.prototype.bo=function(){if(this.lo.length<this.maximumToastsVisible&&0<this.yo.length){var t=this.yo.shift();this.wo(t)}},i.prototype.wo=function(o){var e=document.getElementById(this.toasterWrapperId),i=o.id,s=o.wrapperId,r=this.ko(i,s);this.lo.push({id:i,element:r}),e.appendChild(r),t.applyBindings(o,document.getElementById(i))},i.prototype.ko=function(t,o){var e=document.createElement("oj-rgbu-jraf-toast");e.setAttribute("id",t),e.setAttribute("toast-type","[[toastType]]"),e.setAttribute("severity","[[severity]]"),e.setAttribute("toast-title","[[toastTitle]]"),e.setAttribute("message","[[message]]"),e.setAttribute("primary-button","[[primaryButton]]"),e.setAttribute("secondary-button","[[secondaryButton]]"),e.setAttribute("auto-dismiss","[[autoDismiss]]"),e.setAttribute("auto-dismiss-timeout","[[autoDismissTimeout]]"),e.setAttribute("on-oj-rgbu-jraf-toast-dismissed","[[handleToastDismissed]]");var i=document.createElement("div");return i.setAttribute("id",o),i.appendChild(e),i},i.prototype.Do=function(t){var o=this,e=this.vo++,i=this.X.uniqueId+"toast"+e;return{id:i,wrapperId:this.X.uniqueId+"toast-wrapper"+e,toastType:t.toastType,severity:t.severity,toastTitle:t.toastTitle,message:t.message,primaryButton:t.primaryButton,secondaryButton:t.secondaryButton,autoDismiss:t.autoDismiss,autoDismissTimeout:t.autoDismissTimeout,handleToastDismissed:function(t,e){return o.Bo(t,e)},context:new s(i,this)}},i.prototype.Bo=function(t){var o=this,e=t.target.id;this._o(e).then((function(){o.bo()}))},i.prototype.xo=function(t){var o=this.lo.filter((function(o){return o.id===t}));return 1===o.length?o[0]:null},i.prototype._o=function(i){var s=this;o.info("Toaster._removeToast: Removing %s.",i);var r=document.getElementById(i).parentElement;return e.collapse(r,{duration:"150ms",persist:"all"}).then((function(){t.removeNode(r),s.Eo(i)}))},i.prototype.Eo=function(t){for(var e=-1,i=0;i<this.lo.length;i++)if(this.lo[i].id===t){e=i;break}-1!==e?this.lo.splice(e,1):o.warn("Toaster._cleanupToastState: Did not find state for toast %s.",t)},i.prototype.Io=function(t){for(var e=-1,i=0;i<this.yo.length;i++)if(this.yo[i].id===t){e=i;break}-1!==e?this.yo.splice(e,1):o.warn("Toaster._cancelToast: Did not find state for toast %s.",t)},s.prototype.isQueued=function(){for(var t=this.To.yo,o=0;o<t.length;o++)if(t[o].id===this.po)return!0;return!1},s.prototype.isShown=function(){for(var t=this.To.lo,o=0;o<t.length;o++)if(t[o].id===this.po)return!0;return!1},s.prototype.isDismissed=function(){return!this.isQueued()&&!this.isShown()},s.prototype.dismiss=function(){if(this.isQueued())this.To.Io(this.po);else if(this.isShown()){var t=document.getElementById(this.po);t&&t.dismiss()}},i}));