define(["jraf/utils/ValidationUtils","jraf/composites/utils/TranslationLoaderUtil","module","ojs/ojbutton","ojs/ojdialog"],(function(t,o,e){"use strict";function n(t){var o=this,e=t.uniqueId;this.dialogId=e+"_dialog",this.dialogHeaderId=e+"_dialogHeader",this.loadingTranslations=n._translationLoader.getTranslations(),this.handleBeforeClose=function(t,e){return o._handleBeforeClose(t,e)},this.handleClose=function(t,e){o._handleClose(t,e)},this.componentInitializing=Promise.all([this.loadingTranslations,t.properties]).then((function(t){o.translations=t[0],o._initializeProperties(t[1])}))}return n.LEVEL_INFO="info",n.LEVEL_WARNING="warning",n.LEVEL_ERROR="error",n.LEVEL_CONFIRMATION="confirmation",n.TYPE_OK="ok",n.TYPE_OK_CANCEL="okCancel",n.TYPE_YES_NO="yesNo",n.TYPE_CUSTOM="custom",n._translationLoader=new o("oj-rgbu-jraf-message-dialog",e.id),n.prototype.activated=function(){return this.componentInitializing},n.prototype._handleBeforeClose=function(o,e){if(t.isFunction(this.beforeCloseHandler))return this.beforeCloseHandler(o,e)},n.prototype._handleClose=function(o,e){t.isFunction(this.closeHandler)&&this.closeHandler(o,e)},n.prototype.open=function(){var t=this;this.componentInitializing.then((function(){document.getElementById(t.dialogId).open()}))},n.prototype.close=function(){var t=this;this.componentInitializing.then((function(){document.getElementById(t.dialogId).close()}))},n.prototype._initializeProperties=function(t){var o=t.level;this.headerIcon=this._getDialogHeaderIcon(o),this.headerText=this._getDialogHeaderText(o),this.modality=this._getDialogModality(t.modeless),this.footerButtons=this._getFooterButtons(t),this.beforeCloseHandler=t.beforeCloseHandler,this.closeHandler=t.closeHandler},n.prototype._getDialogHeaderIcon=function(t){var o="oj-rgbu-jraf-message-dialog-icon ";return t===n.LEVEL_CONFIRMATION?o+="oj-rgbu-jraf-message-dialog-confirmation-icon":t===n.LEVEL_ERROR?o+="oj-rgbu-jraf-message-dialog-error-icon":t===n.LEVEL_WARNING?o+="oj-rgbu-jraf-message-dialog-warning-icon":o+="oj-rgbu-jraf-message-dialog-info-icon",o},n.prototype._getDialogModality=function(t){return t?"modeless":"modal"},n.prototype._getDialogHeaderText=function(t){return t===n.LEVEL_CONFIRMATION?this.translations.confirmation:t===n.LEVEL_ERROR?this.translations.error:t===n.LEVEL_WARNING?this.translations.warning:this.translations.information},n.prototype._getFooterButtons=function(o){var e=[],i=o.type;return(i===n.TYPE_OK_CANCEL||i===n.TYPE_YES_NO||i===n.TYPE_CUSTOM&&t.isNonemptyString(o.customCancelButtonLabel))&&e.push(this._getCancelButton(o)),i!==n.TYPE_CUSTOM||t.isNonemptyString(o.customOkButtonLabel)?(e.push(this._getOkButton(o)),e):e},n.prototype._getCancelLabel=function(t){return t.type===n.TYPE_OK_CANCEL?this.translations.cancel:t.type===n.TYPE_YES_NO?this.translations.no:t.customCancelButtonLabel},n.prototype._getOkLabel=function(t){return t.type===n.TYPE_OK||t.type===n.TYPE_OK_CANCEL?this.translations.ok:t.type===n.TYPE_YES_NO?this.translations.yes:t.customOkButtonLabel},n.prototype._getCancelButton=function(t){return this._getButton(this._getCancelLabel(t),t.cancelAction)},n.prototype._getOkButton=function(t){return this._getButton(this._getOkLabel(t),t.okAction)},n.prototype._getButton=function(o,e){if(!t.isFunction(e)){var n=this;e=function(){n.close()}}return{buttonLabel:o,buttonHandler:e}},n}));