define(["ojs/ojcore","jraf/jrafcore","jraf/utils/ValidationUtils"],(function(l,i,n){"use strict";function t(l){if(!n.isObjectStrict(l)||!n.isNumberStrict(l.interval)||!n.isArray(l.callbacks))throw new TypeError("PollingManager: Invalid options.");if(this._hasInvalidCallbacks(l.callbacks))throw new TypeError("PollingManager: Invalid options. All callbacks must be functions.");this._pollingStarted=!1,this._pollingTimer=null,this._pollingInterval=l.interval,this._callbacks=l.callbacks,this._initializeKey(l.key)}return t._managerCount=0,t.prototype._hasInvalidCallbacks=function(l){return l.filter((function(l){return!n.isFunction(l)})).length>0},t.prototype._initializeKey=function(l){var i=n.isNonemptyString(l);this._key=i?l:"PollingManager"+ ++t._managerCount},t.prototype.startPolling=function(t){if(!this._pollingStarted&&this._requiresPolling()){var o=this;t=n.getBoolean(t,!0),this._pollingStarted=!0,t&&this._makePollingCalls(),this._pollingTimer=window.setInterval((function(){o._makePollingCalls()}),this._pollingInterval),i.UIShell.registerPollingId(this._pollingTimer)}else l.Logger.info("PollingManager.startPolling (%s): Called start when polling has already started or when polling is not required.",this._key)},t.prototype._requiresPolling=function(){return this._callbacks.length>0},t.prototype._makePollingCalls=function(){var i=this._callbacks.length;l.Logger.info("PollingManager._makePollingCalls (%s): Invoking %d callback function(s).",this._key,i),this._callbacks.forEach((function(l){l()}))},t.prototype.stopPolling=function(){l.Logger.info("PollingManager.stopPolling (%s): Stopping polling.",this._key),this._pollingTimer?(this._pollingStarted=!1,i.UIShell.clearPollingId(this._pollingTimer),this._pollingTimer=null):l.Logger.info("PollingManager.stopPolling (%s): Polling was never started.",this._key)},t}));