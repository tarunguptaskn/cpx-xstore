define(["ojs/ojcore","jquery","jraf/jrafcore","knockout","jraf/utils/ValidationUtils","ojs/ojcorerouter","ojs/ojrouter"],(function(t,e,i,n,o,a){"use strict";var r={initialize:function(){if(this._initialized)throw new Error("PageTitleHelper.initialize: Already initialized.");this._initialized=!0,this._coreRouter=i.App.getRootRouter(),this._coreRouter||(this._rootRouter=t.Router.rootInstance),this._activeContentTitle=null,this._attachEvents()},_attachEvents:function(){e(window.document).on("jrafcontentchange",(function(t,e){r._handleJrafContentChange(e)})),i.App.getApplicationName().subscribe((function(){this._updateTitle()}),this),this._coreRouter?this._coreRouter.currentState.subscribe((function(t){t.state&&(r._activeContentTitle=null,r._updateTitle())})):t.Router.transitionedToState.add((function(t){r._handleRouterTransition(t)}))},_handleJrafContentChange:function(t){r._activeContentTitle=t.title,r._updateTitle()},_handleRouterTransition:function(t){t.hasChanged&&(r._activeContentTitle=null,r._updateTitle())},_updateTitle:function(){window.document.title=r._getPageTitle()},_getPageTitle:function(){var t=this._getApplicationPageName(),e=i.App.getApplicationName();return[this._activeContentTitle,t,e()].filter((function(t){return o.isNonemptyString(t)})).join(" : ")},_getApplicationPageName:function(){if(this._coreRouter instanceof a){var e=i.App.getRootRouterState(),n=e.detail.title||e.detail.label||e.path;return t.Translations.getTranslatedString(n)}if(this._rootRouter instanceof t.Router){var o=this._rootRouter.currentState(),r=o.title||o.label||o.id;return t.Translations.getTranslatedString(r)}return null}};return r}));