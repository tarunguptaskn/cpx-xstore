define(["ojs/ojanimation","hammerjs","jraf/composites/utils/TranslationLoaderUtil","module","ojs/ojknockout"],(function(t,i,s,n){"use strict";o.TOAST_TYPE_STANDARD="standard",o.TOAST_TYPE_ANNOUNCEMENT="announcement",o.DEFAULT_DISMISS_TIMEOUT=3e3,o._defaultTimeout=o.DEFAULT_DISMISS_TIMEOUT;var e={};function o(t){var i=this;this._loadingTranslations=o._translationLoader.getTranslations(),this._context=t,this._componentInitializing=Promise.all([this._loadingTranslations,this._context.properties]).then((function(t){i._initializeProperties(t[0],t[1])}))}return e[o.TOAST_TYPE_STANDARD]={info:{icon:"oj-rgbu-jraf-standard-toast-info"},warning:{icon:"oj-rgbu-jraf-standard-toast-warning"},error:{icon:"oj-rgbu-jraf-standard-toast-error"},success:{icon:"oj-rgbu-jraf-standard-toast-success"}},e[o.TOAST_TYPE_ANNOUNCEMENT]={info:{icon:"oj-rgbu-jraf-announcement-toast-info"},warning:{icon:"oj-rgbu-jraf-announcement-toast-warning"},error:{icon:"oj-rgbu-jraf-announcement-toast-error"},success:{icon:"oj-rgbu-jraf-announcement-toast-success"}},o._translationLoader=new s("oj-rgbu-jraf-toast",n.id),o.prototype.activated=function(){return this._componentInitializing},o.prototype.bindingsApplied=function(){var t=this;this._fadeIn().then((function(){t._dismissOnSwipeUp(),t._setupAutoDismiss()}))},o.prototype.disconnected=function(){i(this._context.element).off("swipeup"),this.timeoutId&&window.clearTimeout(this.timeoutId)},o.prototype._initializeProperties=function(t,i){var s=this,n=this._context.uniqueId;this.dismissButtonId=n+"_dismiss",this.dismissLabel=t.dismiss,e[o.TOAST_TYPE_STANDARD].info.title=t.standardInfoTitle,e[o.TOAST_TYPE_STANDARD].warning.title=t.standardWarningTitle,e[o.TOAST_TYPE_STANDARD].error.title=t.standardErrorTitle,e[o.TOAST_TYPE_STANDARD].success.title=t.standardSuccessTitle,e[o.TOAST_TYPE_ANNOUNCEMENT].info.title=t.announcementInfoTitle,e[o.TOAST_TYPE_ANNOUNCEMENT].warning.title=t.announcementWarningTitle,e[o.TOAST_TYPE_ANNOUNCEMENT].error.title=t.announcementErrorTitle,e[o.TOAST_TYPE_ANNOUNCEMENT].success.title=t.announcementSuccessTitle,this.toastType=i.toastType,this.severity=i.severity,this.toastIcon=null,this.toastIconLabel=null,this.toastTitle=i.toastTitle,this.message=i.message,this.autoDismiss=i.autoDismiss,this.autoDismissTimeout=i.autoDismissTimeout?i.autoDismissTimeout:o._defaultTimeout,i.primaryButton&&(this.primaryButton={label:i.primaryButton.label,callback:i.primaryButton.callback}),i.secondaryButton&&(this.secondaryButton={label:i.secondaryButton.label,callback:i.secondaryButton.callback}),this._applyDefaults(),this.dismissToast=function(){s._dismissToast()},this.firePrimary=function(){s.dismissToast(),s.primaryButton.callback()},this.fireSecondary=function(){s.dismissToast(),s.secondaryButton.callback()}},o.prototype._applyDefaults=function(){var t;t=e[this.toastType][this.severity],this.toastIcon="oj-rgbu-jraf-toast-icon "+t.icon,this.toastIconLabel=t.title,this.toastTitle=this.toastTitle||t.title},o.prototype._fadeIn=function(){return t.fadeIn(this._context.element,{duration:"250ms"})},o.prototype.dismiss=function(){this._dismissToast()},o.prototype._dismissToast=function(){var i=this;t.slideOut(this._context.element,{direction:"end",duration:"250ms"}),t.fadeOut(this._context.element,{duration:"250ms",persist:"all"}).then((function(){i._raiseDismissed()}))},o.prototype._dismissOnSwipeUp=function(){var t=this,s=new i(this._context.element);s.get("swipe").set({direction:i.DIRECTION_VERTICAL}),s.on("swipeup",(function(){t.dismissToast()}))},o.prototype._setupAutoDismiss=function(){var t=this;this.autoDismiss&&(this.timeoutId=window.setTimeout((function(){t._dismissToast()}),this.autoDismissTimeout))},o.prototype._raiseDismissed=function(){this._raiseCustomEvent("ojRgbuJrafToastDismissed",!1)},o.prototype._raiseCustomEvent=function(t,i){var s={bubbles:!0,cancelable:i};return this._context.element.dispatchEvent(new CustomEvent(t,s))},o.setDefaultDismissTime=function(t){if(!("number"==typeof t&&t>0))throw new TypeError("Toast.setDefaultDismissTime: Timeout must be a positive number");o._defaultTimeout=t},o}));