define(["ojs/ojcore","jquery","jraf/utils/ValidationUtils"],(function(e,t,r){"use strict";function o(t){if("object"!=typeof t||null===t)throw new Error("jsonContent was not a non-null object.");if("string"!=typeof t.title||!t.title)throw new Error("jsonContent was missing a required title property.");if(t.resourceType!==o.CONTENT_TYPE_FOLDER&&t.resourceType!==o.CONTENT_TYPE_URL&&t.resourceType!==o.CONTENT_TYPE_MODULE&&t.resourceType!==o.CONTENT_TYPE_SECTION)throw new Error("jsonContent was missing a required content type.");if(!(t.resourceType!==o.CONTENT_TYPE_MODULE||"object"==typeof t.moduleBinding&&null!==t.moduleBinding||"object"==typeof t.moduleOptions&&null!==t.moduleOptions))throw new Error("Module content provided no module binding or module options object.");if(t.resourceType===o.CONTENT_TYPE_URL&&("string"!=typeof t.url||t.url.length<=0))throw new Error("URL content provides no URL string.");if(t.resourceType!==o.CONTENT_TYPE_FOLDER||Array.isArray(t.children)&&0!==t.children.length||e.Logger.warn("Folder content has no children. Folder will not be displayed."),this.id=t.id,this.title=t.title,this.allowContentKeyOverride=r.getBoolean(t.allowContentKeyOverride,!0),this.contentKey=t.contentKey||"",this.keysList=t.keysList||"",this.visible="boolean"!=typeof t.visible||t.visible,this.accessKey=t.accessKey||null,this.shortDesc=t.shortDesc||"",this.defaultContent="boolean"==typeof t.defaultContent&&t.defaultContent,this.callbackIds=r.isObjectStrict(t.callbacks)?t.callbacks:{},this.resourceProperties={},this.resourceProperties.resourceType=t.resourceType,t.resourceType===o.CONTENT_TYPE_MODULE)this.resourceProperties.moduleBinding=t.moduleBinding,this.resourceProperties.moduleOptions=t.moduleOptions;else if(t.resourceType===o.CONTENT_TYPE_URL)this.resourceProperties.url=t.url,this.resourceProperties.height=t.height||o.URL_CONTENT_DEFAULT_HEIGHT,this.resourceProperties.width=t.width||o.URL_CONTENT_DEFAULT_WIDTH;else if(t.resourceType===o.CONTENT_TYPE_FOLDER&&(this.resourceProperties.children=[],Array.isArray(t.children)))for(var i=0;i<t.children.length;i++){var n=new o(t.children[i]);this.resourceProperties.children.push(n)}if(this.targetProperties={},t.resourceType===o.CONTENT_TYPE_MODULE||t.resourceType===o.CONTENT_TYPE_URL){var s=t.targetProperties;"object"==typeof s&&null!==s||(s={}),this.targetProperties.targetType=s.targetType||o.CONTENT_TARGET_MAIN_AREA,this.targetProperties.targetTitle=s.targetTitle||this.title,this.targetProperties.targetType===o.CONTENT_TARGET_POPUP&&(this.targetProperties.height=s.height||o.POPUP_CONTENT_DEFAULT_HEIGHT,this.targetProperties.width=s.width||o.POPUP_CONTENT_DEFAULT_WIDTH,this.targetProperties.stretchChildren="boolean"!=typeof s.stretchChildren||s.stretchChildren,this.targetProperties.resizable="boolean"!=typeof s.resizable||s.resizable,this.targetProperties.helpTopicId=s.helpTopicId||"",this.targetProperties.shortDesc=s.shortDesc||"",this.targetProperties.showCloseIcon="boolean"!=typeof s.showCloseIcon||s.showCloseIcon),this.targetProperties.targetType===o.CONTENT_TARGET_MAIN_AREA&&(this.targetProperties.reuseInstance="boolean"!=typeof s.reuseInstance||s.reuseInstance,this.targetProperties.removable="boolean"!=typeof s.removable||s.removable,this.targetProperties.reloadTab="boolean"==typeof s.reloadTab&&s.reloadTab,this.targetProperties.refreshOnDisclosure="boolean"==typeof s.refreshOnDisclosure&&s.refreshOnDisclosure,this.targetProperties.dynamicTabFocus="boolean"!=typeof s.dynamicTabFocus||s.dynamicTabFocus),this.targetProperties.targetType!==o.CONTENT_TARGET_MAIN_AREA&&this.targetProperties.targetType!==o.CONTENT_TARGET_GLOBAL_MODAL_PAGE&&this.targetProperties.targetType!==o.CONTENT_TARGET_CONTEXTUAL_MODAL_PAGE||(this.targetProperties.fillContentArea=r.getBoolean(s.fillContentArea,!1))}this.isLaunchable()&&(this.Oe=t)}return o.CONTENT_TYPE_FOLDER="folder",o.CONTENT_TYPE_SECTION="section",o.CONTENT_TYPE_URL="url",o.CONTENT_TYPE_MODULE="module",o.CONTENT_TARGET_WINDOW="_blank",o.CONTENT_TARGET_MAIN_AREA="_self",o.CONTENT_TARGET_POPUP="_popup",o.CONTENT_TARGET_GLOBAL_MODAL_PAGE="_global",o.CONTENT_TARGET_CONTEXTUAL_MODAL_PAGE="_contextual",o.URL_CONTENT_DEFAULT_HEIGHT="500px",o.URL_CONTENT_DEFAULT_WIDTH="500px",o.POPUP_CONTENT_DEFAULT_HEIGHT="250px",o.POPUP_CONTENT_DEFAULT_WIDTH="250px",o.prototype.getId=function(){return this.id},o.prototype.getType=function(){return this.type},o.prototype.getTitle=function(){return e.Translations.getTranslatedString(this.title)},o.prototype.isFolder=function(){return this.resourceProperties.resourceType===o.CONTENT_TYPE_FOLDER},o.prototype.isUrl=function(){return this.resourceProperties.resourceType===o.CONTENT_TYPE_URL},o.prototype.isModule=function(){return this.resourceProperties.resourceType===o.CONTENT_TYPE_MODULE},o.prototype.hasModuleOptions=function(){return this.isModule()&&"object"==typeof this.resourceProperties.moduleOptions&&null!==this.resourceProperties.moduleOptions||this.isUrl()},o.prototype.isSection=function(){return this.resourceProperties.resourceType===o.CONTENT_TYPE_SECTION},o.prototype.isLaunchable=function(){return this.isModule()||this.isUrl()},o.prototype.isDefaultContent=function(){return!this.isSection()&&!this.isFolder()&&this.defaultContent},o.prototype.isNewWindowContent=function(){return this.targetProperties.targetType===o.CONTENT_TARGET_WINDOW},o.prototype.isPopupContent=function(){return this.targetProperties.targetType===o.CONTENT_TARGET_POPUP},o.prototype.isMainAreaContent=function(){return this.targetProperties.targetType===o.CONTENT_TARGET_MAIN_AREA},o.prototype.isGlobalModalPageContent=function(){return this.targetProperties.targetType===o.CONTENT_TARGET_GLOBAL_MODAL_PAGE},o.prototype.isContextualModalPageContent=function(){return this.targetProperties.targetType===o.CONTENT_TARGET_CONTEXTUAL_MODAL_PAGE},o.prototype.isFillContentArea=function(){return this.targetProperties.fillContentArea},o.prototype.getTargetTitle=function(){var t=this.targetProperties.targetTitle||this.title;return e.Translations.getTranslatedString(t)},o.prototype.getAllowContentKeyOverride=function(){return this.allowContentKeyOverride},o.prototype.getContentKey=function(){if(r.isNonemptyString(this.contentKey))return this.contentKey;var e=this.keysList||"";return this.getTargetTitle()+"|"+e},o.prototype.isReuseInstance=function(){return"boolean"!=typeof this.targetProperties.reuseInstance||this.targetProperties.reuseInstance},o.prototype.isRemovable=function(){return"boolean"!=typeof this.targetProperties.removable||this.targetProperties.removable},o.prototype.isShouldFocusTab=function(){return"boolean"!=typeof this.targetProperties.dynamicTabFocus||this.targetProperties.dynamicTabFocus},o.prototype.isReloadTab=function(){return"boolean"==typeof this.targetProperties.reloadTab&&this.targetProperties.reloadTab},o.prototype.isRefreshOnDisclosure=function(){return"boolean"==typeof this.targetProperties.refreshOnDisclosure&&this.targetProperties.refreshOnDisclosure},o.prototype.getChildren=function(){if(this.isFolder())return this.resourceProperties.children;var e="getChildren not support for content type: "+this.resourceProperties.resourceType;throw new Error(e)},o.prototype.find=function(e){if("string"!=typeof e&&e.length<=0)throw new Error("Invalid contentId.");if(this.getId()===e)return this;if(this.isFolder())for(var t=this.getChildren(),r=0;r<t.length;r++){var o=t[r].find(e);if(null!==o)return o}return null},o.prototype.getUrl=function(){if(!this.isUrl())throw new Error("getUrl is unsupported for the content type: "+this.resourceProperties.resourceType);return this.resourceProperties.url},o.prototype.getModuleBinding=function(){if(this.isModule())return this.resourceProperties.moduleBinding;if(this.isUrl())return this.getUrlContentModuleBinding();throw new Error("getModuleBinding is unsupported for the content type: "+this.resourceType)},o.prototype.getUrlContentModuleBinding=function(){return{name:"jraf/UrlContent",params:{url:this.resourceProperties.url,height:this.resourceProperties.height,width:this.resourceProperties.width}}},o.prototype.getModuleOptions=function(){if(this.isModule())return this.resourceProperties.moduleOptions;if(this.isUrl())return this.getUrlContentModuleOptions();throw new Error("getModuleOptions is unsupported for the content type: "+this.resourceType)},o.prototype.getUrlContentModuleOptions=function(){return{name:"jraf/UrlContent",params:{url:this.resourceProperties.url,height:this.resourceProperties.height,width:this.resourceProperties.width}}},o.prototype.getCallbackId=function(e){return this.callbackIds[e]},o.createDialogContent=function(e,t,r,i){var n={title:e,moduleBinding:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:o.CONTENT_TARGET_POPUP}};return r&&(n.targetProperties.height=r),i&&(n.targetProperties.width=i),new o(n)},o.createModuleDialogContent=function(e,t,r,i){var n={title:e,moduleOptions:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:o.CONTENT_TARGET_POPUP}};return r&&(n.targetProperties.height=r),i&&(n.targetProperties.width=i),new o(n)},o.createTabContent=function(e,t){return new o({title:e,moduleBinding:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:o.CONTENT_TARGET_MAIN_AREA}})},o.createModuleTabContent=function(e,t){return new o({title:e,moduleOptions:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:o.CONTENT_TARGET_MAIN_AREA}})},o.createGlobalModalPageContent=function(e,t){return o.createModalPageContent(e,t,!0)},o.createContextualModalPageContent=function(e,t){return o.createModalPageContent(e,t,!1)},o.createModalPageContent=function(e,t,r){return new o({title:e,moduleBinding:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:r?o.CONTENT_TARGET_GLOBAL_MODAL_PAGE:o.CONTENT_TARGET_CONTEXTUAL_MODAL_PAGE}})},o.createModuleGlobalModalPageContent=function(e,t){return o.createModuleModalPageContent(e,t,!0)},o.createModuleContextualModalPageContent=function(e,t){return o.createModuleModalPageContent(e,t,!1)},o.createModuleModalPageContent=function(e,t,r){return new o({title:e,moduleOptions:t,resourceType:o.CONTENT_TYPE_MODULE,targetProperties:{targetType:r?o.CONTENT_TARGET_GLOBAL_MODAL_PAGE:o.CONTENT_TARGET_CONTEXTUAL_MODAL_PAGE}})},o.createUrlTabContent=function(e,t,r,i){var n={title:e,resourceType:o.CONTENT_TYPE_URL,url:t,targetProperties:{targetType:o.CONTENT_TARGET_MAIN_AREA}};return r&&(n.height=r),i&&(n.width=i),new o(n)},o.completeContent=function(e){if(r.isObjectStrict(e)&&r.isNonemptyString(e.title)){if(r.isNonemptyString(e.url))return e.resourceType=o.CONTENT_TYPE_URL,new o(e);if(e.moduleBinding||e.moduleOptions)return e.resourceType=o.CONTENT_TYPE_MODULE,new o(e)}return null},o.extendContent=function(e,i){if(!(e instanceof o&&e.isLaunchable()))throw new TypeError("Content.extendContent: content must be a launchable Content");var n=r.isObjectStrict(i)?i:{};return new o(t.extend(!0,{},e.Oe,n))},o}));