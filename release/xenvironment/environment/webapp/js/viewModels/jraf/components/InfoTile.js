define(["ojs/ojcore","knockout","jquery","jraf/utils/ValidationUtils","jraf/utils/KeyboardUtils"],(function(e,t,i,n,l){"use strict";var a=e.Translations.getTranslatedString;function r(e){if(this.eventsChannel={},n.isObjectStrict(e.bluePrintData)&&(this.eventsChannel=e.eventsChannel,e=e.bluePrintData),!n.isNonemptyString(t.unwrap(e.tileId))||!n.isNonemptyString(t.unwrap(e.title)))throw new TypeError("InfoTile: Invalid input.");this.tileId=t.unwrap(e.tileId),this.type=t.unwrap(e.type),n.isNonemptyString(this.type)||(this.type="metric");var i=t.unwrap(e.label);this.label=n.isNonemptyString(i)?e.label:void 0,t.isObservable(this.label)||(this.label=t.observable(this.label));var l=t.unwrap(e.severity);this.severity=n.isNonemptyString(l)?e.severity:"none",t.isObservable(this.severity)||(this.severity=t.observable(this.severity)),this.tileIndicatorLabel=t.pureComputed((function(){return this._getTileIndicatorLabel()}),this),this.title=e.title,this.metric=e.metric||"",this.metricLabel=e.metricLabel||"",this.disabled="boolean"==typeof t.unwrap(e.disabled)&&e.disabled,this.moduleBinding=e.moduleBinding||null;var r="boolean"==typeof t.unwrap(e.selected)&&e.selected;this.selected=t.isObservable(r)?r:t.observable(r),this.tileSelectionHandler=e.tileSelectionHandler,this.tileSelectionIndicatorAriaLabel=a("jraf.dashboard.tileSelectionIndicatorAriaLabel");var s=this;this.handleTileSelection=function(){s._handleTileSelectionEvent()},this.handleTileKeydown=function(e,t){return s._handleTileKeydownEvent(t)}}return r.prototype._handleTileSelectionEvent=function(){t.unwrap(this.disabled)||(this.eventsChannel&&this.eventsChannel.tileSelected?this.eventsChannel.tileSelected.dispatch(this.tileId):n.isFunction(this.tileSelectionHandler)&&this.tileSelectionHandler(this.tileId))},r.prototype._handleTileKeydownEvent=function(e){return l.isEnterKey(e)&&this._handleTileSelectionEvent(),!0},r.prototype._getTileIndicatorLabel=function(){if("admin"===this.type)return a("jraf.dashboard.adminTileLabel");var e=this.severity();return a("high"===e?"jraf.dashboard.criticalSeverityLabel":"medium"===e?"jraf.dashboard.importantSeverityLabel":"low"===e?"jraf.dashboard.normalSeverityTile":"jraf.dashboard.noSeverityLabel")},r}));