define(["knockout","jquery","ojs/ojcore","ojs/ojbootstrap","jraf/models/UIShellManager","factories/RunnableActionFactory","ojs/ojcollectiondataprovider","libs/xenvironment/urlService","ojs/ojformlayout","ojs/ojinputtext","ojs/ojvalidationgroup","ojs/ojcomposite","jraf/composites/oj-rgbu-jraf-snackbar/loader"],(function(e,t,n,o,a,i,l,r){let s=n.Translations.getTranslatedString;return new function(){let n=this;n.headerLabel=s("xenv.runaction.RunActionHeaderLabel"),n.actionNameLabel=s("xenv.runaction.ActionNameLabel"),n.actionNameId=jraf.UIShell.generateUniqueId(),n.submitButtonId=jraf.UIShell.generateUniqueId(),n.snackBarId=jraf.UIShell.generateUniqueId(),this.tracker=e.observable(),n.actionName=e.observable(),this.actionNameRaw=e.observable(),this.actionNameRaw.subscribe((function(e){let t=document.getElementById(n.submitButtonId),o=0===e.length;t.disabled!==o&&(document.getElementById(n.submitButtonId).disabled=o)})),n.listDataProvider=e.observable(),n.listCollection=null,n.listCollection=i.createRunnableActionCollection(),n.listDataProvider(new l(n.listCollection)),n.typeAheadActions=e.observableArray(),this.handleSelectionChanged=function(e){n.actionName(e.detail.value)},this.submitButtonClick=function(){document.getElementById(n.actionNameId).validate().then((function(){let e=t.ajax({url:r.getRunServiceUrl(),type:"POST",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},data:{name:n.actionName}});e.done((function(){o(s("xenv.runaction.TheActionWasSubmitted")+n.actionName(),"success",3e3),n.actionName("")})),e.fail((function(e,t,n){console.error("Could not submit action: "+n),o(s("xenv.runaction.UnableToSubmitError")+n,"error",3e3)})),a.stopProcessingIndicator()}))}.bind(this),this.keyUpListener=function(e){13===e.keyCode&&this.submitButtonClick()}.bind(this);let o=function(e,t,o){null===o&&(o=2e3),console.info("Action result: "+e),document.getElementById(n.snackBarId).openSnack({message:e,severity:t,timeout:o})}}}));